#Object Driver Database Mapping
```
              ( Root )
                  |
         +--------+--------+
         |                 |
  [User_V1.0]        [Config_V1.0]
         |                 |
  /user/apanda/       /config/server/
  |      |      |
  O      O      O    <- Posts[1] Posts[2] Posts[3]
  |      |      |
  +------+------+
  |
  O <- Comments[0]
```
---
```
# oddm
# æ–‡ä»¶å: oddm_interface_demo.rb
# æ¨¡å—: ODDM å¯¹è±¡é©±åŠ¨å±‚æ¥å£æ¼”ç¤º
# ç›®æ ‡: å±•ç¤º ODDM å¦‚ä½•åœ¨ Ruby ä¸­å®ç°é¢å‘å¯¹è±¡çš„å¯»å€å’Œæ“ä½œï¼Œä»¥æ›¿ä»£ä¼ ç»Ÿ ORM/SQLã€‚
#
# ODDM çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå°†æ•°æ®æ“ä½œè½¬æ¢ä¸ºå¯¹è±¡å›¾çš„éå†å’ŒåŸå­æ€§æ“ä½œï¼Œ
# æå¤§åœ°ç®€åŒ–äº†åº”ç”¨å±‚çš„ä¸šåŠ¡é€»è¾‘ä»£ç ã€‚

# å‡è®¾ ODL (Object-Driven Layer) é©±åŠ¨å±‚å·²è¢«åˆå§‹åŒ–ï¼Œå¹¶æš´éœ²äº† Root æ¥å£ã€‚
# ODL è´Ÿè´£å°†ä»¥ä¸‹æ“ä½œç¿»è¯‘æˆé«˜æ•ˆçš„ Redis å‘½ä»¤åºåˆ—æˆ– SQL å­æŸ¥è¯¢ã€‚

module ODDM
  # æ¨¡æ‹Ÿ ODL æä¾›çš„æ ¹å¯¹è±¡æ¥å£
  Root = ODL_Driver.new_connection 
end

# =========================================================================
# åœºæ™¯ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹ (Class + Instance Naming)
# =========================================================================

puts "--- åœºæ™¯ä¸€: åˆ›å»ºæ–°çš„å¯¹è±¡å®ä¾‹ ---"
# ODDM æ“ä½œ: ä» Root èŠ‚ç‚¹æŒ‚è½½ä¸€ä¸ªæ–°çš„ 'User' å®ä¾‹ï¼Œå…·åä¸º 'gemini-panda'
begin
  new_user = ODDM::Root.User.create(
    name: "Gemini Panda",
    email: "ai@google.com",
    role: "Developer",
    is_active: true
  )
  puts "âœ… åˆ›å»ºæˆåŠŸ: #{new_user.path} (è‡ªåŠ¨åˆ†é…ç‰ˆæœ¬: V1.0)"

rescue ODDM::IntegrityError => e
  puts "âŒ åˆ›å»ºå¤±è´¥ (äº‹åŠ¡å›æ»š): #{e.message}"
end


# =========================================================================
# åœºæ™¯äºŒï¼šå¤æ‚è·¯å¾„å¯»å€ä¸åŠŸèƒ½å¼æŸ¥è¯¢ (Functionality Query)
# =========================================================================

puts "\n--- åœºæ™¯äºŒ: å¤æ‚è·¯å¾„å¯»å€ä¸åŠŸèƒ½å¼æŸ¥è¯¢ ---"

# ä¸šåŠ¡éœ€æ±‚: æ‰¾åˆ°ç”¨æˆ· 'apanda' æ‰€æœ‰å¤„äº 'draft' çŠ¶æ€çš„ Post é›†åˆã€‚
# ä¼ ç»Ÿæ–¹æ³•éœ€è¦ JOIN æˆ–å¤šæ¬¡ SELECTã€‚

draft_posts = ODDM::Root            # ä»æ ¹å¼€å§‹
              .User['apanda']      # å¯»å€åˆ°å…·åå¯¹è±¡ 'apanda'
              .Posts               # è®¿é—®å…¶å­å¯¹è±¡é›†åˆ 'Posts' (æŒ‚è½½å…³ç³»)
              .where(status: :draft) # åŠŸèƒ½å¼ç­›é€‰ (ODL ç¿»è¯‘æˆé«˜æ•ˆçš„ WHERE/IN æŸ¥è¯¢)
              .order_by(:created_at, :desc)

puts "âœ… æŸ¥è¯¢æˆåŠŸ: æ‰¾åˆ° #{draft_posts.count} ç¯‡è‰ç¨¿æ–‡ç« ã€‚"
puts "   è¿”å›ç±»å‹: ODDM::ObjectCollection (è€Œéæ•°æ®åº“è¡Œ)"
puts "   ---"


# =========================================================================
# åœºæ™¯ä¸‰ï¼šåŸå­æ€§æ›´æ–° (Atomic Update)
# =========================================================================

puts "\n--- åœºæ™¯ä¸‰: åŸå­æ€§æ›´æ–° (è·¯å¾„å¯»å€å’Œæ“ä½œåŸå­åŒ–) ---"

# ä¸šåŠ¡éœ€æ±‚: æ‰¾åˆ° 'apanda' çš„ç¬¬ä¸€ç¯‡è‰ç¨¿ Post çš„åå­—æ˜¯ 'ODDM-POC-V1' çš„è¯„è®ºï¼Œå¹¶å°†å…¶å†…å®¹æ ‡è®°ä¸º 'å·²å®¡æ ¸'ã€‚

target_comment = draft_posts      # æ²¿ç”¨ä¸Šä¸€æ­¥çš„é›†åˆç»“æœ
                 .find { |p| p.title == 'ODDM-POC-V1' } # å†…å­˜æˆ–äºŒæ¬¡æŸ¥æ‰¾
                 .Comments['C001'] # å¯»å€åˆ°å…·åå­å¯¹è±¡ 'C001'
                 
if target_comment
  # ODDM æ“ä½œ: å¯¹å•ä¸ªå¯¹è±¡è¿›è¡ŒåŸå­æ€§æ›´æ–°
  target_comment.update(
    content: target_comment.content.gsub("TODO", ""), # ä¸šåŠ¡é€»è¾‘
    status: :approved,
    updated_by: ODDM::Root.User['gemini-panda'] # è®°å½•å¼•ç”¨è·¯å¾„
  )
  
  puts "âœ… æ›´æ–°æˆåŠŸ: è·¯å¾„ #{target_comment.path} çš„çŠ¶æ€å·²æ›´æ–°ä¸º :approved"
  # ODL ç¡®ä¿ï¼š[content]ã€[status]ã€[updated_by] çš„ä¿®æ”¹åœ¨åº•å±‚å­˜å‚¨æ˜¯åŸå­æ€§äº‹åŠ¡ã€‚

else
  puts "âŒ æœªæ‰¾åˆ°ç›®æ ‡æ–‡ç« æˆ–è¯„è®ºã€‚"
end

# =========================================================================
# AI åä½œä¼˜åŠ¿å½°æ˜¾ï¼šå¯è¿½æº¯çš„é”™è¯¯å¤„ç†
# =========================================================================

puts "\n--- AI åä½œä¼˜åŠ¿: è·¯å¾„åŒ–é”™è¯¯å¤„ç† ---"

# å‡è®¾ ODL å°è¯•è¯»å–ä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§
begin
  non_existent_value = ODDM::Root.User['apanda'].Posts[999].non_existent_attribute
rescue ODDM::AddressingError => e
  # ODL æŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯ç›´æ¥æ˜¯å¯¹è±¡è·¯å¾„ï¼ŒAI æ— éœ€è§£æ SQL é”™è¯¯
  puts "ğŸš¨ ODL æ•è·é”™è¯¯: #{e.message}"
  # åä½œä¼˜åŠ¿: AI å¯ç«‹å³è¯Šæ–­å‡ºé—®é¢˜åœ¨ 'Posts' é›†åˆçš„ç¬¬ 999 å·å®ä¾‹ä¸Šã€‚
  puts "   => AI è¯Šæ–­: é—®é¢˜å‘ç”Ÿåœ¨å¯¹è±¡è·¯å¾„å±‚ï¼Œè€Œéåº•å±‚ SQL/Redis è¯­æ³•ã€‚"
end

# åä½œæ€»ç»“: ODDM ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨åŒä¸€å¥—å¯¹è±¡è¯­è¨€ä¸Šè¿›è¡Œè®¾è®¡ã€ç¼–ç å’Œé”™è¯¯è¯Šæ–­ã€‚
```
